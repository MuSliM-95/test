
## Настройка Локального Линтинга и Форматирования

Данный процесс обеспечивает автоматическую проверку и стандартизацию Python-кода с использованием **Ruff** (линтер) и **Black** (форматтер) перед каждым коммитом, основываясь на едином файле конфигурации `pyproject.toml`.

### Требования и Файлы Конфигурации

1.  **`backend/pyproject.toml`**: Содержит единые правила для Black и Ruff.
2.  `backend/requirements-dev.txt`: Список зависимостей для разработки (`pre-commit`, `ruff`, `black`).
3.  `.pre-commit-config.yaml` (в корне): Настройка Git-хуков.

### Шаг 1: Установка Инструментов Разработки

Инструменты линтинга должны быть установлены из файла зависимостей для разработки.

1.  Активируйте виртуальное окружение:
    ```bash
    source .venv/bin/activate
    ```
2.  Установите необходимые инструменты, указав путь к файлу:
    ```bash
    pip install -r backend/requirements-dev.txt
    ```

### Шаг 2: Активация Git Хуков

Необходимо инициализировать механизм Git-хуков для текущего репозитория.

1.  В корне репозитория выполните команду:
    ```bash
    pre-commit install
    ```
    *Подтверждение: должна появиться строка `pre-commit installed at .git/hooks/pre-commit`.*

### Шаг 3: Первичное форматирование проекта

Для устранения старых ошибок форматирования (`E501 Line too long`) запустите Black принудительно для всего кода бэкенда. Это гарантирует, что все файлы будут соответствовать стандарту.

```bash
black backend/
```

### Шаг 4: Проверка проекта вручную

Для выполнения полной проверки всех файлов проекта (без создания коммита) используйте команду:

```bash
pre-commit run --all-files
```

### Шаг 5: Порядок работы с Git

После активации, при каждой попытке `git commit`, последовательно запустятся все проверки.

1.  **При наличии ошибок:** Проверки (Black/Ruff) автоматически исправят форматирование и стиль, опираясь на правила из `backend/pyproject.toml`.
2.  Коммит будет **отменен**.
3.  **Действие разработчика:**
    *   Добавьте исправленные файлы в индекс: `git add .`
    *   Повторите коммит: `git commit -m "..."`

### Дополнительно: Пропуск проверок

Для экстренного коммита с игнорированием всех проверок используйте флаг `--no-verify`:

```bash
git commit -m "wip: экстренный коммит" --no-verify
```
